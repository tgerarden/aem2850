---
title: "Mapping data to graphics, amounts, and proportions"
author: "Todd Gerarden"
output:
  xaringan::moon_reader:
    lib_dir: "libs"
    css: ["xaringan-themer.css", "css/tdg-slides.css"]
#    css: ['default', 'metropolis', 'metropolis-fonts']
    seal: false
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      slideNumberFormat: "%current%"
      ratio: "16:9"
      navigation:
        scroll: false
      # beforeInit: "libs/offline-mathjax.js"
editor_options: 
  chunk_output_type: console
---

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_mono_accent(base_color = "#B31B1B",
                  text_font_size = "1.4rem")
xaringanExtra::use_xaringan_extra(c("tile_view"))
```

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(warning = FALSE, message = FALSE, 
                      #cache = TRUE,
                      fig.retina = 3, fig.align = "center",
                      fig.width=14, fig.height=7)
```

```{r packages-data, include=FALSE}
library(tidyverse)
library(gapminder)
```

class: center middle main-title section-title-4

# Mapping data to graphics, amounts, and proportions

.class-info[

**Week 7**

AEM 2850 / 5850 : R for Business Analytics<br>
Cornell Dyson<br>
Fall 2025

Acknowledgements: 
[Andrew Heiss](https://datavizm20.classes.andrewheiss.com), 
[Claus Wilke](https://wilkelab.org/SDS375/)
<!-- [Grant McDermott](https://github.com/uo-ec607/lectures), -->
<!-- [Jenny Bryan](https://stat545.com/join-cheatsheet.html), -->
<!-- [Allison Horst](https://github.com/allisonhorst/stats-illustrations) -->

]

---

# Announcements

This week marks the start of the data visualization component of this course

No homework this week due to Fall Break ðŸ˜Ž

**Group project due Friday, Nov. 7 at 11:59pm** (full details to come soon!)

**Group project groups due on canvas this Friday (October 10)**
  - Form groups of 4
  - All students in each group must be enrolled at the same course level
  - If unable to form a group of 4, please state that in your submission

We are grading Prelim 1 and will update you when we can

Questions before we get started?


---

# Plan for this week

.pull-left[
### Tuesday
  - [Course progress](#progress)
  - [Prologue](#prologue)
  - [Data, aesthetics, <br> & the grammar of graphics](#grammar-of-graphics)
  - [Amounts](#amounts)
  - [Plotting amounts using ggplot](#plotting-amounts)
  - [example-07-1](#example-1)
  - [Reference: More examples](#more-examples)
]

.pull-right[
### Thursday
  - [Proportions](#proportions)
  - [example-07-2](#example-2)
  - [Reference: Additional layers](#additional-layers)
]

---
class: inverse, center, middle
name: progress

# Course progress

---

# Course objectives reminder

1. Develop basic proficiency in `R` programming
2. Understand data structures and manipulation
3. Describe effective techniques for data visualization and communication
4. Construct effective data visualizations
5. Utilize course concepts and tools for business applications

---

# Where we've been

1. **Develop basic proficiency in `R` programming**
2. **Understand data structures and manipulation**
3. Describe effective techniques for data visualization and communication
4. Construct effective data visualizations
5. Utilize course concepts and tools for business applications

---

# Where we're going next

1. Develop basic proficiency in `R` programming
2. Understand data structures and manipulation
3. **Describe effective techniques for data visualization and communication**
4. **Construct effective data visualizations**
5. Utilize course concepts and tools for business applications

---

# Schedule overview

#### Weeks 1-5: Programming Foundations

#### Weeks 7-10: Data Visualization Foundations

#### Weeks 11+: Special Topics (mix of programming and dataviz)

See [aem2850.toddgerarden.com/schedule](https://aem2850.toddgerarden.com/schedule/) for details


---
class: inverse, center, middle
name: prologue

# Prologue

---

# Remember our concentrations?

How might we visualize these amounts?

.less-left[
```{r, echo = FALSE}
load("data/survey-responses/survey-data.RData")
concentrations_tidy <- concentrations |> 
  rename(
    sus = enviro,
    fin = finance,
    oth = other,
    strat = strategy
    ) |>
  select(-degree, -concentration, -program) |>
  summarize_all(sum, na.rm = TRUE) |>
  pivot_longer(everything(), names_to = "concentration", values_to = "count") |>
  arrange(desc(count))
concentrations_tidy
```
]

--

.more-right[
```{r, echo = FALSE}
concentrations_tidy |> 
  ggplot(aes(x = fct_reorder(concentration, -count), y = count)) +
  geom_col() +
  scale_y_continuous(breaks = scales::breaks_pretty()) +
  theme_xaringan(text_font_size = 38) +
  theme(axis.title.y = element_text(size = 40)) +
  labs(x = NULL,
       y = "Number of Concentrators")
```
]


---

# What are our favorite public companies?

--

```{r, echo = FALSE}
companies |>
  filter(!is.na(name)) |>
  mutate(name = str_to_title(name),
         name = str_replace(name, "\\s?/.*", ""),
         name = str_replace(name, ",?\\s?Inc.?", ""),
         name = str_replace(name, " S\\.a\\.", "")) |> 
  ggplot(aes(y = fct_rev(fct_infreq(name)))) +
  geom_bar() +
  theme_xaringan(text_font_size = 20) +
  theme(axis.title.x = element_text(size = 36)) +
  labs(x = "Number of Potential Investors",
       y = NULL)
```


---
class: inverse, center, middle
name: grammar-of-graphics

# Data, aesthetics,<br>& the grammar of graphics

---

# Mapping data to aesthetics

.pull-left.center[

<figure>
  <img src="img/07/gg-book.jpg" alt="ZZZ" title="ZZZ" width="55%">
</figure>

]

.pull-right[

### Data

A column in a dataset

### Aesthetics

Visual properties of a graph

Position, shape, color, etc.

]

---

# An example: Health vs wealth

.pull-left[
```{r echo=FALSE, out.width='100%'}
knitr::include_graphics("img/07/gapminder-screenshot.png")
```
]

.pull-right[
<table>
  <tr>
    <th class="cell-left">Data</th>
    <th class="cell-left">Aesthetic</th>
    <th class="cell-left">Geometry</th>
  </tr>
  <tr>
    <td class="cell-left">Wealth</td>
    <td class="cell-left">Position (x)</td>
    <td class="cell-left">Point</td>
  </tr>
  <tr>
    <td class="cell-left">Health</td>
    <td class="cell-left">Position (y)</td>
    <td class="cell-left">Point</td>
  </tr>
  <tr>
    <td class="cell-left">Continent</td>
    <td class="cell-left">Color</td>
    <td class="cell-left">Point</td>
  </tr>
  <tr>
    <td class="cell-left">Population</td>
    <td class="cell-left">Size</td>
    <td class="cell-left">Point</td>
  </tr>
</table>
]


---

# Barebones `ggplot2::ggplot()` template

```{r show-ggplot-template-0, eval=FALSE}
library(tidyverse) # tidyverse loads the package ggplot2
```

--

We need to specify data, aesthetic mapping, and geometry:
```{r show-ggplot-template-1, eval=FALSE}
ggplot(
  data = DATA,
  mapping = aes(AESTHETIC MAPPINGS)
) +
  GEOM_FUNCTION()
```

--

Or, in the context of a data wrangling pipeline:
```{r show-ggplot-template-2, eval=FALSE}
DATA |> 
  ... |> # intermediate data wrangling (optional)
  ggplot(aes(AESTHETIC MAPPINGS)) +
  GEOM_FUNCTION()
```

---

# Mapping from `gapminder` to aesthetics
```{r gapminder-data, echo=FALSE, warning=FALSE}
gapminder_2007 <- gapminder |> 
  filter(year == 2007) |> 
  select(country, continent, gdpPercap, lifeExp, pop)
```

```{r head-gapminder-mask-1, echo=FALSE}
gapminder_2007 |> 
  slice(1:2) |> 
  mutate_all(as.character) |> 
  bind_rows(tibble(country = "â€¦", continent = "â€¦", gdpPercap = "â€¦", lifeExp = "â€¦", pop = "â€¦")) |> 
  knitr::kable(format = "html", align = "ccccc")
```

```{r gapminder-example-mask-1, eval=FALSE}
_________ |> #<<
  ggplot(aes(x = _________,
             y = _______,
             color = _________,
             size = ___)) +
  geom______() +
  scale_x_log10() + theme_classic(base_size = 20) # ignore this line for now
```

Let's fill in the blanks... how do we start?

---

# Mapping from `gapminder` to aesthetics
```{r head-gapminder-mask-2, echo=FALSE}
gapminder_2007 |> 
  slice(1:2) |> 
  mutate_all(as.character) |> 
  bind_rows(tibble(country = "â€¦", continent = "â€¦", gdpPercap = "â€¦", lifeExp = "â€¦", pop = "â€¦")) |> 
  knitr::kable(format = "html", align = "ccccc")
```

```{r gapminder-example-mask-2, eval=FALSE}
gapminder |> 
  ggplot(aes(x = _________, #<<
             y = _______, #<<
             color = _________,
             size = ___)) +
  geom______() +
  scale_x_log10() + theme_classic(base_size = 20) # ignore this line for now
```

Let's fill in the blanks... what should we map to x? y?

---

# Mapping from `gapminder` to aesthetics
```{r head-gapminder-mask-3, echo=FALSE}
gapminder_2007 |> 
  slice(1:2) |> 
  mutate_all(as.character) |> 
  bind_rows(tibble(country = "â€¦", continent = "â€¦", gdpPercap = "â€¦", lifeExp = "â€¦", pop = "â€¦")) |> 
  knitr::kable(format = "html", align = "ccccc")
```

```{r gapminder-example-mask-3, eval=FALSE}
gapminder |> 
  ggplot(aes(x = gdpPercap,
             y = lifeExp,
             color = _________, #<<
             size = ___)) + #<<
  geom______() +
  scale_x_log10() + theme_classic(base_size = 20) # ignore this line for now
```

Let's fill in the blanks... what should we map to color? size?

---

# Mapping from `gapminder` to aesthetics
```{r head-gapminder-mask-4, echo=FALSE}
gapminder_2007 |> 
  slice(1:2) |> 
  mutate_all(as.character) |> 
  bind_rows(tibble(country = "â€¦", continent = "â€¦", gdpPercap = "â€¦", lifeExp = "â€¦", pop = "â€¦")) |> 
  knitr::kable(format = "html", align = "ccccc")
```

```{r gapminder-example-mask-4, eval=FALSE}
gapminder |> 
  ggplot(aes(x = gdpPercap,
             y = lifeExp,
             color = continent,
             size = pop)) +
  geom______() + #<<
  scale_x_log10() + theme_classic(base_size = 20) # ignore this line for now
```

Let's fill in the blanks... what geometry should we use?

---

# Mapping from `gapminder` to aesthetics
```{r head-gapminder, echo=FALSE}
gapminder_2007 |> 
  slice(1:2) |> 
  mutate_all(as.character) |> 
  bind_rows(tibble(country = "â€¦", continent = "â€¦", gdpPercap = "â€¦", lifeExp = "â€¦", pop = "â€¦")) |> 
  knitr::kable(format = "html", align = "ccccc")
```

```{r gapminder-example, eval=FALSE}
gapminder |> 
  ggplot(aes(x = gdpPercap,
             y = lifeExp,
             color = continent,
             size = pop)) +
  geom_point() +
  scale_x_log10() + theme_classic(base_size = 20) # ignore this line for now
```

All done! Let's see what we get...

---

# Health and wealth

```{r show-basic-gapminder, echo=FALSE, fig.width=12, fig.height=5.5, out.width="100%"}
gapminder_2007 |> 
  ggplot(aes(x = gdpPercap,
             y = lifeExp,
             color = continent,
             size = pop)) +
  geom_point() +
  scale_x_log10() + theme_classic(base_size = 20)
# +
#   scale_size_continuous(range = c(1, 15),
#                         labels = scales::comma)
```

---

# Grammar components as layers

.pull-left[
So far we know about data, aesthetics, and geometries

Think of these components as **layers**

Add to foundational `ggplot()` with `+`


Why `+` and not `|>`?
> ggplot2 was written before the pipe was discovered


Treat the `+` the same as `|>`

]

.pull-right[

&nbsp;

![](img/07/ggplot-layers-short@4x.png)
]

???

Layer analogy borrowed from [Thomas Lin Pedersen](https://www.data-imaginist.com/) and his ["Drawing Anything with ggplot2" workshop](https://github.com/thomasp85/ggplot2_workshop).

Source for quote: [R4DS (2e)](https://r4ds.hadley.nz/workflow-style.html#ggplot2)

---

# Additional layers

.pull-left[
There are many other grammatical layers we can use to describe graphs!

We can sequentially add layers to the foundational `ggplot()` plot to create complex figures

We will primarily learn by doing, though this slide deck contains [a preview of additional layers](#additional-layers) in case you need some bedtime reading
]

.pull-right[
![](img/07/ggplot-layers@4x.png)
]


---
class: inverse, center, middle
name: amounts

# Amounts

---

# Yay bar plots!

We are a lot better at visualizing line lengths than angles and areas

.pull-left[

```{r example-pie, echo=FALSE, fig.dim=c(4.8, 3), out.width="100%"}
concentrations_tidy |> 
  ggplot(aes(x = "", y = count, fill = concentration)) +
  geom_col() +
  coord_polar(theta = "y") +
  labs(fill = "Concentration") +
  theme_void()
```

]

--

.pull-right[

```{r example-bar, echo=FALSE, fig.dim=c(4.8, 3), out.width="100%"}
concentrations_tidy |> 
  ggplot(aes(x = fct_reorder(concentration, -count), y = count, fill = concentration)) +
  geom_col() +
  scale_y_continuous(breaks = scales::breaks_pretty()) +
  guides(fill = "none") +
  labs(x = "Concentration", y = "Number of Concentrators") +
  theme_minimal()
```

]

---

# Oh no bar plots!

.center[
<figure>
<img src="img/07/obamacareenrollment-fncchart.jpg" alt="Fox News Obamacare enrollment" title="Fox News Obamacare enrollment" width="85%">
</figure>
]

---

# What went wrong?

.center[
<figure>
<img src="img/07/obamacareenrollment-fncchart.jpg" alt="Fox News Obamacare enrollment" title="Fox News Obamacare enrollment" width="85%">
</figure>
]

---

# What went wrong?

.pull-left.center[
<figure>
<img src="img/07/female-height.png" alt="Average female height per country" title="Average female height per country" width="100%">
</figure>
]

--

.pull-right[

**At least two problems:**

1. truncated y axis
2. area scales faster than height

.small[This terrible figure brought to you by a former AEM 2850 / 5850 student!]
]


---

# General rules for bar charts

Useful when the length of the bar is all that matters

--

Bar charts should always start at zero
- Or: don't use bars!

--

Don't use bars for summary statistics. You throw away too much information.
- We will come back to visualizing distributions / uncertainty next week


---
class: inverse, center, middle
name: plotting-amounts

# Plotting amounts using ggplot

---

# Plotting amounts using ggplot

We'll use a summarized version of the gapminder dataset for examples

```{r }
library(gapminder)
gapminder_continents <- gapminder |>
  filter(year == 2007) |>  # only look at 2007
  count(continent) |>      # count the number of countries per continent
  arrange(desc(n))         # sort by count, descending
gapminder_continents
```

---

# Start with a simple bar plot

.left-code.small-code[

```{r gapminder-bars, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder_continents |> 
  ggplot(aes(x = continent, # continent to x
             y = n)) +      # n countries to y
  geom_col()                # add bars #<<
```
How could we improve this?
]

.right-plot[

![](`r knitr::fig_chunk("gapminder-bars", "png")`)

]


---

# Start with a simple bar plot

.left-code.small-code[

```{r gapminder-bars-2, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder_continents |> 
  ggplot(aes(x = continent, # continent to x
             y = n)) +      # n countries to y
  geom_col()                # add bars #<<
```
Is "n" a good axis title?

Do we need "continent" at all?
]

.right-plot[

![](`r knitr::fig_chunk("gapminder-bars-2", "png")`)

]


---

# Add some labels

.left-code.small-code[

```{r gapminder-bars-labeled, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder_continents |> 
  ggplot(aes(x = continent, 
             y = n)) +
  geom_col() +
  labs(x = NULL, y = "Number of countries") #<<
```

Is alphabetical the best ordering?
]

.right-plot[

![](`r knitr::fig_chunk("gapminder-bars-labeled", "png")`)

]

---

# Order by data value

.left-code.small-code[

```{r gapminder-bars-ordered, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder_continents |> 
  ggplot(aes(x = fct_reorder(continent, n),  #<<
             y = n)) +
  geom_col() +
  labs(x = NULL, y = "Number of countries")
```

`fct_reorder(continent, n)` means "reorder the factor variable continent by n, smallest to largest"

Factor is R's term for variables that have a fixed and known set of possible values
]

.right-plot[

![](`r knitr::fig_chunk("gapminder-bars-ordered", "png")`)

]

---

# Order by data value, descending

.left-code.small-code[

```{r gapminder-bars-reversed, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder_continents |> 
  ggplot(aes(x = fct_reorder(continent, -n), #<<
             y = n)) +
  geom_col() +
  labs(x = NULL, y = "Number of countries")
```

`fct_reorder(continent, -n)` means "reorder the factor variable continent by n, largest to smallest"
]

.right-plot[

![](`r knitr::fig_chunk("gapminder-bars-reversed", "png")`)

]

---

# Higher dimensional datasets

`as_factor()` treats `year` as distinct categories, not a continuous measure

.left-code[
```{r geom_bar-ungrouped, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |>
  filter(year==1957 | year==2007) |> 
  group_by(continent, year) |> 
  summarize(
    lifeExp = sum(lifeExp * pop) / sum(pop)
  ) |> 
  ggplot(aes(x = continent,
             y = lifeExp,
             fill = as_factor(year))) + #<<
  geom_col() +
  labs(x = NULL, 
       y = "Life expectancy", fill = "Year")
```
What is wrong with this visualization of life expectancy in two different years?
]

.right-plot[

![](`r knitr::fig_chunk("geom_bar-ungrouped", "png")`)

]

---

# Grouped bar charts

Use grouped bars or facets for higher dimensional datasets

.left-code[
```{r geom_bar-grouped, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |>
  filter(year==1957 | year==2007) |> 
  group_by(continent, year) |> 
  summarize(
    lifeExp = sum(lifeExp * pop) / sum(pop)
  ) |> 
  ggplot(aes(x = continent,
             y = lifeExp,
             fill = as_factor(year))) + 
  geom_col(position = "dodge") + #<<
  labs(x = NULL, 
       y = "Life expectancy", fill = "Year")
```
]

.right-plot[

![](`r knitr::fig_chunk("geom_bar-grouped", "png")`)

]

---

# Facets

Use grouped bars or facets for higher dimensional datasets

.left-code[
```{r geom_bar-faceted, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |>
  filter(year==1957 | year==2007) |> 
  group_by(continent, year) |> 
  summarize(
    lifeExp = sum(lifeExp * pop) / sum(pop)
  ) |> 
  ggplot(aes(x = continent,
             y = lifeExp,
             fill = as_factor(year))) + 
  geom_col() + #<<
  facet_wrap(vars(year)) + #<<
  guides(fill = "none") + #<<
  labs(x = NULL, 
       y = "Life expectancy")
```
]

.right-plot[

![](`r knitr::fig_chunk("geom_bar-faceted", "png")`)

]

---

# Alternative: Dots instead of bars

Dots are preferable if we want to truncate the axes

.left-code[

```{r dots, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |>
  filter(year == 2007, continent == "Americas") |>
  ggplot(aes(x = lifeExp,
             y = fct_reorder(country, lifeExp))) +
  geom_point() + #<<
  guides(color = "none") +
  labs(x = "Life expectancy (years)", y = NULL) +
  theme_minimal()
```
]

.right-plot[

![](`r knitr::fig_chunk("dots", "png")`)

]

---
class: inverse, center, middle
name: example-1

# example-07-1:<br>amounts-practice.R


---
class: inverse, center, middle
name: more-examples

# Reference: More examples


---

# Wait, what about geom_bar?

Use `geom_bar` to count and plot in one step

.left-code[

```{r geom_bar, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |> # old data: rows are countries #<<
  filter(year == 2007) |>
  ggplot(aes(x = continent)) + # note: no y arg
  geom_bar() + #<<
  labs(x = NULL, y = "Number of countries")
```
]

.right-plot[

![](`r knitr::fig_chunk("geom_bar", "png")`)

]

---

# Wait, what about geom_bar?

Here we can reorder by frequency using `fct_infreq`

.left-code[

```{r geom_bar-ordered, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |>
  filter(year == 2007) |>
  ggplot(aes(x = fct_infreq(continent))) + #<<
  geom_bar() +
  labs(x = NULL, y = "Number of countries")
```
]

.right-plot[

![](`r knitr::fig_chunk("geom_bar-ordered", "png")`)

]

---

# We can also flip geom_col/bar axes

Simply use `y = ` instead of `x = ` for the aesthetic mapping

.left-code[

```{r geom_bar-y, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |>
  filter(year == 2007) |>
  ggplot(aes(y = fct_infreq(continent))) + #<<
  geom_bar() +
  labs(x = "Number of countries", y = NULL) #<<
```
]

.right-plot[

![](`r knitr::fig_chunk("geom_bar-y", "png")`)

]

---

# We can also flip geom_col/bar axes

`fct_rev()` reverses the order of factors

.left-code[

```{r geom_bar-y-rev, fig.show="hide", tidy=FALSE, message=FALSE, fig.dim=c(4.8, 3.5), out.width="100%"}
gapminder |>
  filter(year == 2007) |>
  ggplot(aes(y = fct_rev(fct_infreq(continent)))) + #<<
  geom_bar() +
  labs(x = "Number of countries", y = NULL)
```
]

.right-plot[

![](`r knitr::fig_chunk("geom_bar-y-rev", "png")`)

]













---
class: inverse, center, middle
name: proportions

# Proportions

---

# Last class we plotted amounts

```{r, echo=FALSE}
load("data/survey-responses/survey-data.RData")

prior_programming |> 
  ggplot(aes(x = fct_rev(prior_programming))) +
  geom_bar() +
  labs(x = NULL,
       y = "number of students",
       title = "Have you done any programming before?") +
  theme_xaringan() +
  theme(axis.title.y = element_text(size = 32))
```

---

# How else could we visualize these data?

```{r, echo=FALSE}
prior_programming |> 
  ggplot(aes(x = fct_rev(prior_programming))) +
  geom_bar() +
  labs(x = NULL,
       y = "number of students",
       title = "Have you done any programming before?") +
  theme_xaringan() +
  theme(axis.title.y = element_text(size = 32))
```

---

# Have you done any programming before?

.pull-left-3[
```{r, echo=FALSE, fig.height = 6, fig.width = 9}
prior_programming |> 
    count(prior_programming) |> 
    mutate(share = n / sum(n)) |> 
    ggplot(aes(x = fct_rev(prior_programming), y = share)) +
    geom_col() +
    labs(x = NULL,
         y = "share of students") +
    theme_xaringan() +
    theme(axis.title.y = element_text(size = 44))
```
]

.pull-middle-3[
```{r, echo=FALSE, fig.height = 6, fig.width = 9}
prior_programming |> 
  count(prior_programming) |> 
  ggplot(aes(x = n, y = "", fill = fct_rev(prior_programming))) +
  geom_col() +
  coord_polar() +
  scale_x_continuous(
    name = NULL, breaks = NULL
  ) +
  scale_xaringan_fill_discrete(direction = -1) +
  labs(x = NULL,
       y = NULL,
       fill = NULL) +
  theme_xaringan(text_font_size = 48)
```
]

.pull-right-3[
```{r, echo=FALSE, fig.height = 6, fig.width = 9}
prior_programming |>
  ggplot(aes(x = "", fill = prior_programming)) +
  geom_bar(position = "fill") +
  coord_flip() +
  scale_xaringan_fill_discrete() +
  guides(fill = guide_legend(reverse = TRUE)) +
  labs(x = NULL,
       y = "share of students",
       fill = NULL) +
  theme_xaringan(text_font_size = 48) +
  theme(axis.title.x = element_text(size = 44)) +
  theme(legend.position = "bottom")
```
]

--

Which do you think is best?

--

Does it depend on what you want to communicate?

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   |   |   |   
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             |   |   |  
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      |   |   |  
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      | âœ” | âœ– | âœ–
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      | âœ” | âœ– | âœ–
Visually appealing for small datasets            |   |   |  
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      | âœ” | âœ– | âœ–
Visually appealing for small datasets            | âœ” | âœ– | âœ”
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      | âœ” | âœ– | âœ–
Visually appealing for small datasets            | âœ” | âœ– | âœ”
Works well for a large number of subsets         |   |   |   
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      | âœ” | âœ– | âœ–
Visually appealing for small datasets            | âœ” | âœ– | âœ”
Works well for a large number of subsets         | âœ– | âœ– | âœ” 
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      | âœ” | âœ– | âœ–
Visually appealing for small datasets            | âœ” | âœ– | âœ”
Works well for a large number of subsets         | âœ– | âœ– | âœ” 
Works well for time series and similar           |   |   |  
]

---

# Pros and cons of different approaches

.small.center[
               | Pie chart | Stacked bars | Side-by-side bars
:----------    | :-------: | :----------: | :---------------:
Allows easy comparison of relative proportions   | âœ– | âœ– | âœ” 
Shows data as proportions of a whole             | âœ” | âœ” | âœ–
Emphasizes simple fractions (1/2, 1/3, ...)      | âœ” | âœ– | âœ–
Visually appealing for small datasets            | âœ” | âœ– | âœ”
Works well for a large number of subsets         | âœ– | âœ– | âœ” 
Works well for time series and similar           | âœ– | âœ” | âœ–
]

--

No one visualization fits all scenarios!

```{r, include=FALSE}
theme_xaringan_restore_defaults() # revert to ggplot2 defaults for remainder
theme_set(theme_gray(base_size = 18)) # increase base text size
```

---

# Side-by-side bars using ggplot

How could we use ggplot to visualize *proportions* using side-by-side bars?

--

.pull-left[
We could do it manually:
```{r side-by-side-bars-1, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |> 
    count(prior_programming) |> #<<
    mutate(share = n / sum(n)) |> #<<
    ggplot(aes(
      x = prior_programming, 
      y = share
      )) +
    geom_col() + 
    labs(x = NULL,
         y = "share of students")
```

How could we reverse the bars' order?
]

.right-plot[
  ![](`r knitr::fig_chunk("side-by-side-bars-1", "png")`)
]

---

# Side-by-side bars using ggplot

<br>

.pull-left[
```{r side-by-side-bars-2, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |> 
    count(prior_programming) |> 
    mutate(share = n / sum(n)) |> 
    ggplot(aes(
      x = fct_reorder( #<<
        prior_programming,  #<<
        -share #<<
        ), #<<
      y = share
      )) +
    geom_col() + 
    labs(x = NULL,
         y = "share of students")
```
]

.right-plot[
  ![](`r knitr::fig_chunk("side-by-side-bars-2", "png")`)
]

---

# Side-by-side bars using ggplot

`fct_rev()` also works well since there are only two categories:

.pull-left[
```{r side-by-side-bars-3, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |> 
    count(prior_programming) |> 
    mutate(share = n / sum(n)) |> 
    ggplot(aes(
      x = fct_rev(prior_programming), #<<
      y = share
      )) +
    geom_col() + 
    labs(x = NULL,
         y = "share of students")
```
]

.right-plot[
  ![](`r knitr::fig_chunk("side-by-side-bars-3", "png")`)
]

---

# Stacked bars using ggplot

How could we use ggplot to visualize *proportions* using stacked bars?

--

.pull-left[
Again, we could do it manually:
```{r stacked-bars-1, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |>
    count(prior_programming) |> 
    mutate(share = n / sum(n)) |> 
    ggplot(aes(
        x = "",    # provide dummy to x #<<
        y = share, # plot shares on y #<<
        fill = prior_programming #<<
    )) +
    geom_col()
```
By default, `geom_col` stacks bars if they fall in the same place (`x`)
]

.right-plot[
  ![](`r knitr::fig_chunk("stacked-bars-1", "png")`)
]

---

# Stacked bars using ggplot

Alternatively, we could use `geom_bar()` to count and plot the data for us

.pull-left[
```{r stacked-bars-2, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |>
  ggplot(aes(
    x = "", 
    fill = prior_programming
  )) +
  geom_bar()
```

But this gives us *counts*. We want *shares*!
]

.right-plot[
  ![](`r knitr::fig_chunk("stacked-bars-2", "png")`)
]

---

# Stacked bars using ggplot

The argument `position = "fill"` scales everything to sum to 1

.pull-left[
```{r stacked-bars-3, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |>
  ggplot(aes(
    x = "", 
    fill = prior_programming
  )) +
  geom_bar(position = "fill") + #<<
  labs(x = NULL, y = "share")
```
]

.right-plot[
  ![](`r knitr::fig_chunk("stacked-bars-3", "png")`)
]

---

# Pie charts using ggplot

How could we use ggplot to visualize *proportions* using a pie chart?

--

Pie charts are just stacked bars in polar coordinates

.pull-left[
```{r pie-chart-1, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |>
  ggplot(aes(
    y = "", # y, not x #<<
    fill = prior_programming
  )) +
  geom_bar(position = "fill") +
  coord_polar() # convert to polar coordinates #<<
```
]

.right-plot[
  ![](`r knitr::fig_chunk("pie-chart-1", "png")`)
]

---

# Pie charts using ggplot

It takes some work to create a clean pie chart using ggplot!

.pull-left[
```{r pie-chart-2, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.5), out.width="100%"}
prior_programming |>
  ggplot(aes(
    y = "", 
    fill = fct_rev(prior_programming)
  )) +
  geom_bar(position = "fill") +
  coord_polar() +
  scale_x_continuous(
    name = NULL, breaks = NULL
  ) +
  scale_y_discrete(
    name = NULL, breaks = NULL
  ) +
  labs(
    title = "Share of students with\nprior programming experience",
    fill = NULL
  )
```
]

.right-plot[
  ![](`r knitr::fig_chunk("pie-chart-2", "png")`)
]

---
class: inverse, center, middle
name: example-2

# example-07-2:<br>proportions-practice.R









---
class: inverse, center, middle
name: additional-layers

# Reference: Additional layers

---

# Additional layers

.pull-left[
The next several slides contains a preview of additional layers

These are intended as a reference
]

.pull-right[
![](img/07/ggplot-layers@4x.png)
]


---

# Aesthetics

.pull-left-3.center[

`color` (discrete)

```{r aes-color-discrete, echo=FALSE, fig.dim=c(4, 2), out.width="100%"}
eg <- tribble(
  ~x, ~y, ~size, ~x1,
  "A", 1, 5, 1,
  "B", 1, 10, 2,
  "C", 1, 15, 3
)

# Color, discrete
ggplot(eg, aes(x = x, y = y, color = x)) +
  geom_point(size = 30) +
  guides(color = "none") +
  theme(axis.text.y = element_blank(),
        axis.ticks = element_blank())
```

`color` (continuous)

```{r aes-color-continuous, echo=FALSE, fig.dim=c(4, 2), out.width="100%"}
# Color, continuous
ggplot(eg, aes(x = x1, y = y, color = x1)) +
  geom_point(size = 30) +
  guides(color = "none") +
  coord_cartesian(xlim = c(0.5, 3.5)) +
  theme(axis.text.y = element_blank(),
        axis.ticks = element_blank())
```
]

.pull-middle-3.center[

`size`

```{r aes-size, echo=FALSE, fig.dim=c(4, 2), out.width="100%"}
# Size
ggplot(eg, aes(x = x, y = y, size = x)) +
  geom_point() +
  scale_size_discrete(range = c(2, 30)) +
  guides(size = "none") +
  theme(axis.text.y = element_blank(),
        axis.ticks = element_blank())
```

`fill`

```{r aes-fill, echo=FALSE, fig.dim=c(4, 2), out.width="100%"}
# Fill
ggplot(eg, aes(x = x, y = y, fill = x)) +
  geom_point(size = 30, pch = 21, stroke = 5) +
  guides(fill = "none") +
  theme(axis.text.y = element_blank(),
        axis.ticks = element_blank())
```
]

.pull-right-3.center[

`shape`

```{r aes-shape, echo=FALSE, fig.dim=c(4, 2), out.width="100%"}
# Shape
ggplot(eg, aes(x = x, y = y, shape = x)) +
  geom_point(size = 30) +
  guides(shape = "none") +
  theme(axis.text.y = element_blank(),
        axis.ticks = element_blank())
```

`alpha` (opacity)

```{r aes-alpha, echo=FALSE, fig.dim=c(4, 2), out.width="100%"}
# Alpha
ggplot(eg, aes(x = x, y = y, alpha = x)) +
  geom_point(size = 30) +
  guides(alpha = "none") +
  theme(axis.text.y = element_blank(),
        axis.ticks = element_blank())
```
]

---

# Geometries

<table>
  <tr>
    <th class="cell-left"></th>
    <th class="cell-left">Example geometry</th>
    <th class="cell-left">What it makes</th>
  </tr>
  <tr>
    <td class="cell-left"><img src="img/07/geom_bar.png"></td>
    <td class="cell-left"><code class="remark-inline-code">geom_col()</code></td>
    <td class="cell-left">Bar charts</td>
  </tr>
  <tr>
    <td class="cell-left"><img src="img/07/geom_text.png"></td>
    <td class="cell-left"><code class="remark-inline-code">geom_text()</code></td>
    <td class="cell-left">Text</td>
  </tr>
  <tr>
    <td class="cell-left"><img src="img/07/geom_point.png"></td>
    <td class="cell-left"><code class="remark-inline-code">geom_point()</code></td>
    <td class="cell-left">Points</td>
  </tr>
  <tr>
    <td class="cell-left"><img src="img/07/geom_boxplot.png"></td>
    <td class="cell-left"><code class="remark-inline-code">geom_boxplot()</code>&emsp;</td>
    <td class="cell-left">Boxplots</td>
  </tr>
  <tr>
    <td class="cell-left"><img src="img/07/geom_sf.png"></td>
    <td class="cell-left"><code class="remark-inline-code">geom_sf()</code></td>
    <td class="cell-left">Maps</td>
  </tr>
</table>

---

# Geometries

There are dozens of possible geometries

Over the next several weeks we will cover a number of them

See [the **ggplot2** documentation](https://ggplot2.tidyverse.org/reference/index.html#section-layer-geoms) for examples of all the different geometry layers

---

# Scales

Scales change the properties of the variable mapping

<table>
  <tr>
    <th class="cell-left">Example layer</th>
    <th class="cell-left">What it does</th>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">scale_x_continuous()</code></td>
    <td class="cell-left">Make the x-axis continuous</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">scale_x_continuous(breaks = 1:5)&ensp;</code></td>
    <td class="cell-left">Manually specify axis ticks</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">scale_x_log10()</code></td>
    <td class="cell-left">Log the x-axis</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">scale_color_gradient()</code></td>
    <td class="cell-left">Use a gradient</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">scale_fill_viridis_d()</code></td>
    <td class="cell-left">Fill with discrete viridis colors</td>
  </tr>
</table>

---

# Scales

.pull-left[

.center[`scale_x_log10()`]

```{r scale-example-1, echo=FALSE, fig.dim=c(4.8, 3.75), out.width="100%"}
gapminder_2007 |> 
  ggplot(aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10()
```
]

--

.pull-right[

.center[`scale_color_viridis_d()`]

```{r scale-example-2, echo=FALSE, fig.dim=c(4.8, 3.75), out.width="100%"}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() +
  scale_color_viridis_d()
```
]

---

# Facets

Facets show subplots for different subsets of data

<table>
  <tr>
    <th class="cell-left">Example layer</th>
    <th class="cell-left">What it does</th>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">facet_wrap(vars(continent))</code></td>
    <td class="cell-left">Plot for each continent</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">facet_wrap(vars(continent, year))</code>&emsp;</td>
    <td class="cell-left">Plot for each continent/year</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">facet_wrap(..., ncol = 1)</code></td>
    <td class="cell-left">Put all facets in one column</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">facet_wrap(..., nrow = 1)</code></td>
    <td class="cell-left">Put all facets in one row</td>
  </tr>
</table>

---

# Facets

.pull-left[

.center.small[`facet_wrap(vars(continent))`]

```{r facet-example-1, echo=FALSE, fig.dim=c(4.8, 3.75), out.width="100%"}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() +
  facet_wrap(vars(continent))
```
]

--

.pull-right[

.center.small[`facet_wrap(vars(continent, year))`]

```{r facet-example-2, echo=FALSE, fig.dim=c(4.8, 3.75), out.width="100%"}
ggplot(filter(gapminder, year %in% c(2002, 2007)), 
       aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() +
  facet_wrap(vars(year, continent), nrow = 2)
```
]

---

# Coordinates

Change the coordinate system

<table>
  <tr>
    <th class="cell-left">Example layer</th>
    <th class="cell-left">What it does</th>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">coord_cartesian(ylim = c(1, 10))</code>&emsp;</td>
    <td class="cell-left">Zoom in where y is 1â€“10</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">coord_flip()</code></td>
    <td class="cell-left">Switch x and y</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">coord_polar()</code></td>
    <td class="cell-left">Use polar coordinates</td>
  </tr>
</table>

---

# Coordinates

.pull-left[

.center.small[`coord_cartesian(ylim = c(70, 80), xlim = c(10000, 30000))`]

```{r coord-example-1, echo=FALSE, fig.dim=c(4.8, 3.25), out.width="100%"}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() +
  coord_cartesian(ylim = c(70, 80), xlim = c(10000, 30000))
```
]

--

.pull-right[

.center.small[`coord_flip()`]

```{r coord-example-2, echo=FALSE, fig.dim=c(4.8, 3.75), out.width="100%"}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() + 
  coord_flip()
```
]

---

# Labels

Add labels to the plot with a single `labs()` layer

<table>
  <tr>
    <th class="cell-left">Example layer</th>
    <th class="cell-left">What it does</th>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">labs(title = "Neat title")</code></td>
    <td class="cell-left">Title</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">labs(caption = "Something")</td>
    <td class="cell-left">Caption</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">labs(y = "Something")</td>
    <td class="cell-left">y-axis</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">labs(size = "Population")</code></td>
    <td class="cell-left">Title of size legend</td>
  </tr>
</table>

---

# Labels

.left-code[
```{r labels-example, tidy=FALSE, message=FALSE, fig.show="hide", fig.dim=c(4.8, 3.75), out.width="100%"}
gapminder_2007 |> 
  ggplot(aes(x = gdpPercap, y = lifeExp, 
             color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() +
  labs(title = "Health and wealth go together",
       subtitle = "Data from 2007",
       x = "Wealth (GDP per capita)",
       y = "Health (life expectancy)",
       color = "Continent",
       size = "Population",
       caption = "Source: The Gapminder Project")
```
]

.right-plot[
![](`r knitr::fig_chunk("labels-example", "png")`)
]

---

# Theme

`theme()` can be used to change the appearance of anything in a plot

Lots of themes built in and available from other packages

<table>
  <tr>
    <th class="cell-left">Example layer</th>
    <th class="cell-left">What it does</th>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">theme_grey()</code></td>
    <td class="cell-left">Default grey background</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">theme_bw()</td>
    <td class="cell-left">Black and white</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">theme_dark()</td>
    <td class="cell-left">Dark</td>
  </tr>
  <tr>
    <td class="cell-left"><code class="remark-inline-code">theme_minimal()</code></td>
    <td class="cell-left">Minimal</td>
  </tr>
</table>

---

# Theme

.pull-left[

.center.small[`theme_dark()`]

```{r theme-example-1, echo=FALSE, fig.dim=c(4.8, 3.75), out.width="100%"}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() +
  theme_dark()
```
]

--

.pull-right[

.center.small[`theme_minimal()`]

```{r theme-example-2, echo=FALSE, fig.dim=c(4.8, 3.75), out.width="100%"}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
  geom_point() +
  scale_x_log10() + 
  theme_minimal()
```
]

---

# Theme

There are collections of pre-built themes online, like [the **ggthemes** package](https://jrnold.github.io/ggthemes/)

.center[
<figure>
  <img src="img/07/ggthemes.png" alt="ggthemes" title="ggthemes" width="55%">
</figure>
]

---

# Theme

Organizations often make their own custom themes, like [the BBC](https://bbc.github.io/rcookbook/)

.center[
<figure>
  <img src="img/07/bbc-cookbook.png" alt="ggthemes" title="ggthemes" width="80%">
</figure>
]

---

# Theme

Make individual theme adjustments with `theme()`

```{r example-theme-options, eval=FALSE, tidy=FALSE}
theme_bw() + 
theme(legend.position = "bottom",
      plot.title = element_text(face = "bold"),
      panel.grid = element_blank(),
      axis.title.y = element_text(face = "italic"))
```

---

# So many possibilities!

.pull-left[
![](img/07/ggplot-layers@4x.png)
]

.pull-right[
These were just a few examples

See [the **ggplot2** documentation](https://ggplot2.tidyverse.org/reference/index.html) for examples of everything you can do
]


